# 📊 程式行數統計工具

本項目提供了兩個實用的 Git 統計工具，用於跟蹤每日的程式碼變化。

## 🛠️ 工具列表

### 1. `bin/stats` - 彩色終端統計表

顯示每日程式行數的彩色表格，包括新增、刪除、淨變化和檔案類型統計。

**特點：**
- 🎨 彩色終端輸出
- 📊 詳細的按日期統計
- 📁 按檔案類型分類統計
- 📈 每日平均、總計等聚合統計

**使用方式：**

```bash
# 查看全部統計
bin/stats

# 查看過去 7 天的統計
bin/stats -d 7

# 查看過去 30 天的統計
bin/stats -d 30

# 查看幫助
bin/stats -h
```

**輸出範例：**

```
📊 日程式行數統計
════════════════════════════════════════════════════════════════════════════
日期       |     ➕ 新增 |     ➖ 刪除 |   🔄 淨變化 |  主要檔案類型
────────────────────────────────────────────────────────────────────────────
2025-11-12 |      +57276 |       -1220 |      +56056 | json(22843), svg(15859)
2025-11-13 |       +4280 |       -1615 |       +2665 | erb(737), md(1996)
2025-11-14 |       +9123 |        -682 |       +8441 | md(6867), rb(1637)
────────────────────────────────────────────────────────────────────────────
總計       |      +70679 |       -3517 |      +67162 |
════════════════════════════════════════════════════════════════════════════

📈 額外統計：
  • 統計天數：3 天
  • 每日平均新增：23559 行
  • 淨增加：+67162 行

📁 按檔案類型統計：
  • json      : +22843  -0      (淨: +22843)
  • md        : +15707  -327    (淨: +15380)
  • svg       : +15939  -6      (淨: +15933)
  • erb       : +4246   -2649   (淨:  +1597)
  • rb        : +5804   -281    (淨:  +5523)
```

### 2. `bin/stats-export` - 資料匯出工具

將統計資料匯出為 CSV 或 JSON 格式，便於進一步分析。

**特點：**
- 📄 支援 CSV 和 JSON 格式
- 💾 可匯出到檔案
- 🔄 適合與 Excel、Google Sheets 等工具整合

**使用方式：**

```bash
# 顯示 CSV 格式
bin/stats-export -f csv

# 顯示 JSON 格式
bin/stats-export -f json

# 匯出到檔案
bin/stats-export -f csv stats.csv

# 查看幫助
bin/stats-export -h
```

**CSV 輸出範例：**

```csv
日期,新增,刪除,淨變化
2025-11-12,57276,1220,56056
2025-11-13,4280,1615,2665
2025-11-14,9123,682,8441
總計,70679,3517,67162
```

## 📋 統計說明

### 新增（+）和刪除（-）
- **新增**：該日期內新增的程式行數
- **刪除**：該日期內刪除的程式行數
- **淨變化**：新增 - 刪除 的結果

### 排除的檔案

以下檔案和目錄會被排除在統計之外：
- `node_modules/`
- `.bundle/`
- `vendor/bundle/`
- `*.lock` 檔案
- `.DS_Store`
- `*.log` 檔案

### 檔案類型統計

每日統計會顯示該日期新增最多的 2 種檔案類型。在「按檔案類型統計」部分會顯示全部檔案類型的統計。

## 💡 使用案例

### 1. 跟蹤週進度
```bash
bin/stats -d 7
```

### 2. 生成月度報告
```bash
bin/stats-export -f csv > monthly_report_$(date +%Y%m).csv
```

### 3. 與 Git 貢獻者結合
結合 `git log --author` 可以查看特定開發者的貢獻：

```bash
# 修改 bin/stats 中的 git log 命令為：
git log --author="John" --pretty=format:'%h %ai' --numstat
```

## 🎯 最佳實踐

1. **定期檢查**：每週檢查一次統計，了解開發進度
2. **識別模式**：觀察哪些檔案類型變化最大
3. **性能指標**：使用每日平均新增行數作為開發速度的參考
4. **程式碼品質**：刪除行數表示代碼重構的活躍程度

## 🔧 技術細節

- 使用 `git log --numstat` 取得每個 commit 的行數變化
- 按日期（UTC）分組統計
- 使用正則表達式進行檔案類型識別
- 支援彩色終端輸出

## 📝 注意事項

1. 統計只包含 Git 提交的程式碼
2. 未提交的本機更改不會被計算
3. 合併提交 (merge commits) 會被計算在內
4. 大的批次匯入（如初始化）會顯示為單個突增

---

**提示**：將這些命令添加到你的工作流程中，定期監控項目的開發進度！
