<div class="max-w-4xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Profile</h1>
    <p class="text-gray-600 mt-2">Your account information</p>
  </div>

  <!-- Profile Header -->
  <div class="bg-white rounded-lg shadow mb-6 p-6">
    <div class="flex items-center space-x-6">
      <% if current_user&.line_account&.picture_url %>
        <img
          src="<%= current_user.line_account.picture_url %>"
          alt="<%= current_user.name %>"
          class="w-24 h-24 rounded-full border-4 border-green-300"
        >
      <% else %>
        <div class="w-24 h-24 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-bold text-3xl border-4 border-green-300">
          <%= current_user.name.chars.first.upcase %>
        </div>
      <% end %>

      <div class="flex-1">
        <h2 class="text-2xl font-bold text-gray-900">
          <%= current_user.name %>
        </h2>
        <% if current_user.display_name != current_user.name %>
          <p class="text-gray-600">
            (LINE Name: <%= current_user.display_name %>)
          </p>
        <% end %>
        <p class="text-sm text-gray-500 font-mono mt-2">
          <%= current_user.email %>
        </p>
      </div>

      <div class="text-right">
        <div class="text-sm text-gray-600 mb-4">
          <p>Account ID</p>
          <p class="font-mono text-xs text-gray-500">
            <%= current_user.id %>
          </p>
        </div>
        <div class="text-sm text-green-600 font-bold">
          âœ“ Active Account
        </div>
      </div>
    </div>
  </div>

  <!-- Account Information -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
    <!-- Personal Information -->
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
        <span class="text-xl mr-2">ðŸ‘¤</span>
        Personal Information
      </h3>

      <div class="space-y-4">
        <div>
          <label class="text-sm text-gray-600">Name</label>
          <p class="text-gray-900 font-medium">
            <%= current_user.name %>
          </p>
        </div>

        <div>
          <label class="text-sm text-gray-600">Email Address</label>
          <p class="text-gray-900 font-medium break-all">
            <%= current_user.email %>
          </p>
        </div>

        <div>
          <label class="text-sm text-gray-600">Join Date</label>
          <p class="text-gray-900 font-medium">
            <%= current_user.created_at.strftime("%Y-%m-%d %H:%M") %>
          </p>
        </div>

        <div>
          <label class="text-sm text-gray-600">Last Updated</label>
          <p class="text-gray-900 font-medium">
            <%= current_user.updated_at.strftime("%Y-%m-%d %H:%M") %>
          </p>
        </div>
      </div>
    </div>

    <!-- LINE Account Information -->
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
        <span class="text-xl mr-2">ðŸŸ¢</span>
        LINE Account
      </h3>

      <% if current_user.has_line_account? %>
        <div class="space-y-4">
          <div>
            <label class="text-sm text-gray-600">LINE User ID</label>
            <p class="text-gray-900 font-mono text-sm break-all bg-gray-50 p-2 rounded">
              <%= current_user.line_account.line_user_id %>
            </p>
          </div>

          <div>
            <label class="text-sm text-gray-600">LINE Display Name</label>
            <p class="text-gray-900 font-medium">
              <%= current_user.line_account.display_name %>
            </p>
          </div>

          <div>
            <label class="text-sm text-gray-600">Token Status</label>
            <% if current_user.line_account.access_token_expired? %>
              <div class="inline-block px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-bold">
                âš  Expired
              </div>
              <p class="text-red-600 text-sm mt-2">
                The token has expired. Re-login is required.
              </p>
            <% else %>
              <div class="inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold">
                âœ“ Valid
              </div>
              <p class="text-green-600 text-sm mt-2">
                Expires: <%= current_user.line_account.expires_at.strftime("%Y-%m-%d") %>
              </p>
            <% end %>
          </div>

          <div>
            <label class="text-sm text-gray-600">Last Synced</label>
            <p class="text-gray-900 font-medium">
              <%= current_user.line_account.updated_at.strftime("%Y-%m-%d %H:%M") %>
            </p>
          </div>
        </div>
      <% else %>
        <div class="bg-yellow-50 border border-yellow-200 rounded p-4">
          <p class="text-yellow-700">
            Your LINE account is not yet connected.
          </p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Security Section -->
  <div class="bg-white rounded-lg shadow p-6 mb-6">
    <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
      <span class="text-xl mr-2">ðŸ”’</span>
      Security
    </h3>

    <div class="space-y-4">
      <div class="flex items-center justify-between p-4 bg-gray-50 rounded">
        <div>
          <p class="font-medium text-gray-900">Password</p>
          <p class="text-sm text-gray-600">Encrypted and securely stored</p>
        </div>
        <span class="text-green-600 text-xl">âœ“</span>
      </div>

      <div class="flex items-center justify-between p-4 bg-gray-50 rounded">
        <div>
          <p class="font-medium text-gray-900">LINE OAuth Authentication</p>
          <p class="text-sm text-gray-600">
            <% if current_user.has_line_account? %>
              Active - Authenticated with LINE account
            <% else %>
              Not configured
            <% end %>
          </p>
        </div>
        <% if current_user.has_line_account? %>
          <span class="text-green-600 text-xl">âœ“</span>
        <% else %>
          <span class="text-gray-400 text-xl">-</span>
        <% end %>
      </div>

      <div class="flex items-center justify-between p-4 bg-gray-50 rounded">
        <div>
          <p class="font-medium text-gray-900">HTTPS Communication</p>
          <p class="text-sm text-gray-600">All communications are encrypted</p>
        </div>
        <span class="text-green-600 text-xl">âœ“</span>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="flex space-x-4">
    <%= link_to "â† Back", home_path, class: "px-6 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors" %>

    <%= button_to "Logout", logout_path, method: :post, class: "px-6 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors" %>
  </div>

  <!-- Privacy Notice -->
  <div class="mt-12 p-6 bg-blue-50 border border-blue-200 rounded-lg text-center">
    <p class="text-sm text-blue-700">
      <strong>Privacy:</strong> Your information is strictly protected.
      See our <a href="#" class="underline font-bold">Privacy Policy</a> for details.
    </p>
  </div>
</div>
